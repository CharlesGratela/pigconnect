import{r as s,e as y,b as m,f as k,w as g,a as t,i as h,o as p,h as P,l as n,s as f,v}from"./app-DtuGJrLF.js";import{_ as N}from"./AuthenticatedLayout-DDyCWe83.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"flex justify-center"},B={class:"w-[75%] lg:w-[25%]"},V={class:"mb-4"},j={class:"mb-4"},C={class:"mb-4"},E={class:"mb-4"},O={class:"mb-4"},_={key:0,class:"fixed inset-0 flex items-center justify-center z-50 bg-[#543434] bg-opacity-75"},F={__name:"BuyersPreference",setup(R){const a=s(""),i=s(""),u=s(""),l=s(0),d=s(""),c=s(!1),b=async()=>{try{const r=await fetch("/api/buyerspreferencesget",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error("Network response was not ok");const e=await r.json();console.log(e),e&&(a.value=e.preferred_weight,i.value=e.age_of_pigs,u.value=e.price_range,d.value=e.breed,e.prefer_nearby===1?l.value="1":l.value="0")}catch(r){console.error("Error fetching buyer preferences:",r)}},w=async()=>{try{const r=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e=await fetch("/api/buyerspreferencesstore",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({preferred_weight:a.value,age_of_pigs:i.value,price_range:u.value,prefer_nearby:l.value,breed:d.value})});if(!e.ok)throw new Error("Network response was not ok");const o=await e.json();console.log("Form submitted successfully:",o),c.value=!0,window.location.reload(),await b()}catch(r){console.error("Error submitting form:",r)}},x=()=>{c.value=!1};return y(()=>{b()}),(r,e)=>(p(),m("div",null,[k(N,null,{header:g(()=>e[5]||(e[5]=[t("h2",{class:"font-semibold text-xl text-[#543434] leading-tight"},"Buyer Preferences",-1)])),default:g(()=>[t("main",null,[t("div",S,[t("div",B,[t("form",{onSubmit:P(w,["prevent"]),class:"place-content-center"},[t("div",V,[e[6]||(e[6]=t("label",{for:"preferredWeight",class:"block text-sm font-medium text-[#543434]"},"Preferred Weight",-1)),n(t("input",{type:"text",id:"preferredWeight","onUpdate:modelValue":e[0]||(e[0]=o=>a.value=o),class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]"},null,512),[[f,a.value]])]),t("div",j,[e[8]||(e[8]=t("label",{for:"ageOfPigs",class:"block text-sm font-medium text-[#543434]"},"Age of Pigs",-1)),n(t("select",{id:"ageOfPigs","onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]"},e[7]||(e[7]=[t("option",{value:"0-3 months"},"0 to 3 months (Piglets)",-1),t("option",{value:"3-6 months"},"3 to 6 months (Growers)",-1),t("option",{value:"6-8 months"},"6 to 8 months (Finishers)",-1),t("option",{value:"6 months and above"},"6 months and above (Breeding Stock)",-1)]),512),[[v,i.value]])]),t("div",C,[e[9]||(e[9]=t("label",{for:"priceRange",class:"block text-sm font-medium text-[#543434]"},"Price Range",-1)),n(t("input",{type:"text",id:"priceRange","onUpdate:modelValue":e[2]||(e[2]=o=>u.value=o),class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]"},null,512),[[f,u.value]])]),t("div",E,[e[11]||(e[11]=t("label",{for:"preferNearby",class:"block text-sm font-medium text-[#543434]"},"Prefer Nearby Location",-1)),n(t("select",{id:"preferNearby","onUpdate:modelValue":e[3]||(e[3]=o=>l.value=o),class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]"},e[10]||(e[10]=[t("option",{value:"1"},"Yes",-1),t("option",{value:"0"},"No",-1)]),512),[[v,l.value]])]),t("div",O,[e[12]||(e[12]=t("label",{for:"breed",class:"block text-sm font-medium text-[#543434]"},"Preferred Breed",-1)),n(t("input",{type:"text",id:"breed","onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o),class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]"},null,512),[[f,d.value]])]),e[13]||(e[13]=t("button",{type:"submit",class:"w-full bg-[#281c11] text-white p-2.5 rounded-lg focus:ring-4 focus:ring-[#c58a61]"},"Submit",-1))],32)])])])]),_:1}),c.value?(p(),m("div",_,[t("div",{class:"bg-white p-4 rounded-lg shadow-lg w-[80%] md:w-[40%]"},[e[14]||(e[14]=t("h3",{class:"text-xl font-bold text-[#543434] mb-2 text-center"},"Success",-1)),e[15]||(e[15]=t("p",{class:"text-[#543434] text-center"},"Buyer's preference has been saved successfully.",-1)),t("div",{class:"flex justify-center mt-4"},[t("button",{onClick:x,class:"bg-[#281c11] text-white p-2 rounded-lg focus:ring-4 focus:ring-[#c58a61]"},"Close")])])])):h("",!0)]))}};export{F as default};
