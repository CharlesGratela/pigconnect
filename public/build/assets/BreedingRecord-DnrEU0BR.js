import{r as c,x as S,e as E,b as n,f as F,w,o as d,a as e,h as C,l,v as b,F as p,d as u,t as i,s as h,i as A}from"./app-BBvVVKdH.js";import{_ as j}from"./AuthenticatedLayout-DUguJAC5.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"flex justify-center"},N={class:"w-full md:w-[75%] px-4"},O={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},$={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md"},P={class:"mb-4"},V=["value"],q={class:"mb-4"},z=["value"],M={class:"mb-4"},U={class:"mb-4"},K={class:"hidden md:block overflow-x-auto mt-4"},L={class:"min-w-full divide-y divide-[#c59461]"},X={class:"bg-white divide-y divide-[#c59461] text-center"},J={class:"px-6 py-4 whitespace-nowrap"},G={class:"px-6 py-4 whitespace-nowrap"},H={class:"px-6 py-4 whitespace-nowrap"},Q={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap"},Y=["onClick"],Z={class:"block md:hidden mt-4 space-y-4"},ee={class:"py-2"},te={class:"text-sm font-medium text-[#543434]"},oe={class:"text-sm font-medium text-[#543434]"},se={class:"text-sm font-medium text-[#543434]"},re={class:"text-sm font-medium text-[#543434]"},ne={class:"py-2 flex justify-end"},de=["onClick"],ie={__name:"BreedingRecord",setup(ae){const a=c([]),g=c(!1),r=S({sow_id:"",boar_id:"",date_of_breeding:"",expected_farrowing_date:""}),f=c([]),m=c([]),v=async()=>{try{const s=await fetch("/api/breeding-records",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!s.ok)throw new Error("Network response was not ok");const o=await s.json();a.value=o}catch(s){console.error("Error fetching breeding records:",s)}},y=async()=>{try{const s=await fetch("/api/pigs",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!s.ok)throw new Error("Network response was not ok");const o=await s.json();f.value=o.filter(t=>t.gender==="male"),m.value=o.filter(t=>t.gender==="female")}catch(s){console.error("Error fetching pigs:",s)}},k=()=>{const s=new Date(r.date_of_breeding),o=114,t=new Date(s);t.setDate(s.getDate()+o),r.expected_farrowing_date=t.toISOString().split("T")[0]},B=async()=>{try{const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),o=await fetch("/api/breeding-records",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)});if(!o.ok)throw new Error("Network response was not ok");const t=await o.json();a.value.push(t),_()}catch(s){console.error("Error adding breeding record:",s)}},x=async s=>{try{const o=document.querySelector('meta[name="csrf-token"]').getAttribute("content");await fetch(`/api/breeding-records/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":o,Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"}),a.value=a.value.filter(t=>t.id!==s)}catch(o){console.error("Error deleting breeding record:",o)}},_=()=>{r.sow_id="",r.boar_id="",r.date_of_breeding="",r.expected_farrowing_date="",g.value=!1},D=()=>{g.value=!0,y()};return E(()=>{v()}),(s,o)=>(d(),n("div",null,[F(j,null,{header:w(()=>o[4]||(o[4]=[e("h2",{class:"font-semibold text-xl text-[#543434] leading-tight"},"Breeding Records",-1)])),default:w(()=>[e("main",null,[e("div",R,[e("div",N,[e("button",{onClick:D,class:"mb-4 bg-[#281c11] text-white p-2.5 rounded-lg focus:ring-4 focus:ring-[#c58a61]"},"Add Breeding Record"),g.value?(d(),n("div",O,[e("div",$,[e("span",{class:"close cursor-pointer text-[#543434] float-right",onClick:_},"Ã—"),o[10]||(o[10]=e("h3",{class:"text-[#543434] mb-4"},"Add Breeding Record",-1)),e("form",{onSubmit:C(B,["prevent"])},[e("div",P,[o[5]||(o[5]=e("label",{for:"sowId",class:"block text-sm font-medium text-[#543434]"},"Sow (Female Pig)",-1)),l(e("select",{id:"sowId","onUpdate:modelValue":o[0]||(o[0]=t=>r.sow_id=t),class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]",required:""},[(d(!0),n(p,null,u(m.value,t=>(d(),n("option",{key:t.pigId,value:t.pigId},i(t.pigId),9,V))),128))],512),[[b,r.sow_id]])]),e("div",q,[o[6]||(o[6]=e("label",{for:"boarId",class:"block text-sm font-medium text-[#543434]"},"Boar (Male Pig)",-1)),l(e("select",{id:"boarId","onUpdate:modelValue":o[1]||(o[1]=t=>r.boar_id=t),class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]",required:""},[(d(!0),n(p,null,u(f.value,t=>(d(),n("option",{key:t.pigId,value:t.pigId},i(t.pigId),9,z))),128))],512),[[b,r.boar_id]])]),e("div",M,[o[7]||(o[7]=e("label",{for:"dateOfBreeding",class:"block text-sm font-medium text-[#543434]"},"Date of Breeding",-1)),l(e("input",{type:"date",id:"dateOfBreeding","onUpdate:modelValue":o[2]||(o[2]=t=>r.date_of_breeding=t),onChange:k,class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]",required:""},null,544),[[h,r.date_of_breeding]])]),e("div",U,[o[8]||(o[8]=e("label",{for:"expectedFarrowingDate",class:"block text-sm font-medium text-[#543434]"},"Expected Farrowing Date",-1)),l(e("input",{type:"date",id:"expectedFarrowingDate","onUpdate:modelValue":o[3]||(o[3]=t=>r.expected_farrowing_date=t),class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]",readonly:""},null,512),[[h,r.expected_farrowing_date]])]),o[9]||(o[9]=e("button",{type:"submit",class:"w-full bg-[#281c11] text-white p-2.5 rounded-lg focus:ring-4 focus:ring-[#c58a61]"},"Submit",-1))],32)])])):A("",!0),e("div",K,[e("table",L,[o[11]||(o[11]=e("thead",{class:"bg-[#c58a61]"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-[#543434] uppercase tracking-wider"},"Sow ID"),e("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-[#543434] uppercase tracking-wider"},"Boar ID"),e("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-[#543434] uppercase tracking-wider"},"Date of Breeding"),e("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-[#543434] uppercase tracking-wider"},"Expected Farrowing Date"),e("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-[#543434] uppercase tracking-wider"},"Actions")])],-1)),e("tbody",X,[(d(!0),n(p,null,u(a.value,t=>(d(),n("tr",{key:t.id},[e("td",J,i(t.sow_id),1),e("td",G,i(t.boar_id),1),e("td",H,i(t.date_of_breeding),1),e("td",Q,i(t.expected_farrowing_date),1),e("td",W,[e("button",{onClick:I=>x(t.id),class:"bg-red-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-red-300"},"Delete",8,Y)])]))),128))])])]),e("div",Z,[(d(!0),n(p,null,u(a.value,t=>(d(),n("div",{key:t.id,class:"bg-white p-4 rounded-lg shadow-md divide-y divide-[#c59461]"},[e("div",ee,[e("p",te,"Sow ID: "+i(t.sow_id),1),e("p",oe,"Boar ID: "+i(t.boar_id),1),e("p",se,"Date of Breeding: "+i(t.date_of_breeding),1),e("p",re,"Expected Farrowing Date: "+i(t.expected_farrowing_date),1)]),e("div",ne,[e("button",{onClick:I=>x(t.id),class:"bg-red-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-red-300"},"Delete",8,de)])]))),128))])])])])]),_:1})]))}},ue=T(ie,[["__scopeId","data-v-1fe012fd"]]);export{ue as default};
