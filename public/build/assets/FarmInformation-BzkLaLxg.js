import{r as f,y as I,h as B,z as S,e as b,i as E,w as y,o as h,b as e,t as k,g as L,d as A,l as T,m as v,v as N,s as _}from"./app-DNIPENlQ.js";import{_ as V}from"./AuthenticatedLayout-BOqvg2qA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"py-8"},R={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},U={class:"bg-white rounded-2xl shadow-lg p-6 mb-8 border border-gray-100"},$={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},D={class:"bg-gradient-to-r from-emerald-50 to-emerald-100 rounded-xl p-4"},G={class:"flex items-center space-x-3"},O={class:"text-emerald-900 font-semibold truncate"},H={class:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-4"},Z={class:"flex items-center space-x-3"},K={class:"text-blue-900 font-semibold"},P={class:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100"},X={class:"p-6"},Y={class:"space-y-4"},J={class:"relative"},Q={class:"space-y-4 border-t border-gray-200 pt-8"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee={class:"relative"},oe={class:"relative"},le={__name:"FarmInformation",setup(te){const u=f(""),g=f(0),r=I({lat:14.5995,lng:120.9842}),i=f(""),C=f(!1);let d,c;const M=()=>new Promise((t,o)=>{if(window.google&&window.google.maps){t();return}const s=document.createElement("script");s.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCL_IiN0vAn1y3Z_ZttsmYwi4R1fgXD1zU&libraries=places&loading=async",s.async=!0,s.defer=!0,s.onload=()=>{C.value=!0,t()},s.onerror=o,document.head.appendChild(s)}),w=async()=>{try{const t=await fetch("/api/pigfarminformation",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const o=await t.json();if(console.log(o),o&&o.latitude!=null&&o.longitude!=null){u.value=o.feeding_type,g.value=o.frequency_of_feeding;const s=parseFloat(o.latitude),n=parseFloat(o.longitude);!isNaN(s)&&!isNaN(n)&&s>=-90&&s<=90&&n>=-180&&n<=180?(r.lat=s,r.lng=n,c&&d&&(c.setPosition({lat:r.lat,lng:r.lng}),d.setCenter({lat:r.lat,lng:r.lng})),await x(r.lat,r.lng)):console.warn("Invalid coordinates received from server:",o.latitude,o.longitude)}}catch(t){console.error("Error fetching farm information:",t)}},x=async(t,o)=>{if(isNaN(t)||isNaN(o)||t===void 0||o===void 0){console.error("Invalid coordinates for reverse geocoding:",t,o);return}const n=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${o}&key=AIzaSyCL_IiN0vAn1y3Z_ZttsmYwi4R1fgXD1zU`;try{const l=await fetch(n);if(!l.ok)throw new Error("Network response was not ok");const a=await l.json();console.log("Reverse Geocoding Result:",a),a.results&&a.results.length>0&&(i.value=a.results[0].formatted_address)}catch(l){console.error("Error performing reverse geocoding:",l)}},F=async t=>{if(!t||t.trim()===""){console.warn("Empty address provided for geocoding");return}const s=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=AIzaSyCL_IiN0vAn1y3Z_ZttsmYwi4R1fgXD1zU`;try{const n=await fetch(s);if(!n.ok)throw new Error("Network response was not ok");const l=await n.json();if(console.log("Geocoding Result:",l),l.results&&l.results.length>0){const a=l.results[0].geometry.location,p=parseFloat(a.lat),m=parseFloat(a.lng);!isNaN(p)&&!isNaN(m)&&p>=-90&&p<=90&&m>=-180&&m<=180?(r.lat=p,r.lng=m,c&&d&&(c.setPosition({lat:r.lat,lng:r.lng}),d.setCenter({lat:r.lat,lng:r.lng}))):console.error("Invalid coordinates from geocoding:",a)}else console.warn("No geocoding results found for address:",t)}catch(n){console.error("Error performing geocoding:",n)}},j=()=>{(isNaN(r.lat)||isNaN(r.lng))&&(console.warn("Invalid coordinates for map initialization, using default location"),r.lat=14.5995,r.lng=120.9842);try{d=new google.maps.Map(document.getElementById("map"),{center:{lat:r.lat,lng:r.lng},zoom:13,mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0}),c=new google.maps.Marker({position:{lat:r.lat,lng:r.lng},map:d,draggable:!0,title:"Farm Location"}),google.maps.event.addListener(c,"dragend",async function(){const t=c.getPosition(),o=t.lat(),s=t.lng();!isNaN(o)&&!isNaN(s)&&(r.lat=o,r.lng=s,d.setCenter({lat:r.lat,lng:r.lng}),await x(r.lat,r.lng))}),console.log("Google Maps initialized successfully")}catch(t){console.error("Error initializing Google Maps:",t)}},z=async()=>{try{const t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),o=await fetch("/api/pigfarminformation",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({feedingType:u.value,frequencyOfFeeding:g.value,location:r,address:i.value})});if(!o.ok)throw new Error("Network response was not ok");const s=await o.json();console.log("Form submitted successfully:",s),await w(),window.location.reload()}catch(t){console.error("Error submitting form:",t)}};return B(async()=>{try{await M(),await w(),j()}catch(t){console.error("Error loading Google Maps:",t)}}),S(i,async t=>{t&&await F(t)}),(t,o)=>(h(),b("div",null,[E(V,null,{header:y(()=>o[3]||(o[3]=[e("div",{class:"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white p-6 rounded-2xl shadow-lg"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"bg-white/20 p-3 rounded-xl backdrop-blur-sm"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])]),e("div",null,[e("h2",{class:"text-3xl font-bold"},"Farm Information"),e("p",{class:"text-emerald-100 mt-1"},"Configure your farm location and feeding preferences")])])],-1)])),default:y(()=>[e("main",q,[e("div",R,[e("div",U,[o[8]||(o[8]=e("div",{class:"flex items-center justify-between mb-6"},[e("div",null,[e("h3",{class:"text-2xl font-bold text-gray-800"},"Farm Setup"),e("p",{class:"text-gray-600 mt-1"},"Set your farm location and feeding configuration")]),e("div",{class:"bg-emerald-100 p-3 rounded-xl"},[e("svg",{class:"w-8 h-8 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),i.value?(h(),b("div",$,[e("div",D,[e("div",G,[o[5]||(o[5]=e("div",{class:"bg-emerald-600 text-white rounded-lg p-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})])],-1)),e("div",null,[o[4]||(o[4]=e("p",{class:"text-sm font-medium text-emerald-800"},"Current Location",-1)),e("p",O,k(i.value),1)])])]),e("div",H,[e("div",Z,[o[7]||(o[7]=e("div",{class:"bg-blue-600 text-white rounded-lg p-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})])],-1)),e("div",null,[o[6]||(o[6]=e("p",{class:"text-sm font-medium text-blue-800"},"Feeding Type",-1)),e("p",K,k(u.value||"Not set"),1)])])])])):L("",!0)]),e("div",P,[o[20]||(o[20]=e("div",{class:"bg-gradient-to-r from-emerald-50 to-emerald-100 p-6 border-b border-gray-200"},[e("h3",{class:"text-xl font-bold text-emerald-800 flex items-center gap-3"},[e("div",{class:"bg-emerald-600 p-2 rounded-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])]),A(" Configure Farm Details ")]),e("p",{class:"text-emerald-600 mt-1"},"Update your farm location and feeding preferences")],-1)),e("div",X,[e("form",{onSubmit:T(z,["prevent"]),class:"space-y-8"},[e("div",Y,[o[11]||(o[11]=e("h4",{class:"text-lg font-bold text-gray-800 flex items-center space-x-2"},[e("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})]),e("span",null,"Farm Location")],-1)),o[12]||(o[12]=e("div",{class:"bg-gray-50 rounded-xl p-4 border-2 border-gray-200"},[e("label",{for:"location",class:"block text-sm font-medium text-gray-700 mb-3"}," Interactive Map (Drag marker to set exact location) "),e("div",{id:"map",class:"w-full rounded-lg shadow-md border border-gray-300"})],-1)),e("div",null,[o[10]||(o[10]=e("label",{for:"address",class:"block text-sm font-bold text-gray-700 mb-2"},"Farm Address",-1)),e("div",J,[v(e("input",{type:"text",id:"address","onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),placeholder:"Enter your farm address...",class:"w-full px-4 py-3 bg-white border-2 border-gray-200 text-gray-800 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 pl-12"},null,512),[[N,i.value]]),o[9]||(o[9]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})])],-1))])])]),e("div",Q,[o[18]||(o[18]=e("h4",{class:"text-lg font-bold text-gray-800 flex items-center space-x-2"},[e("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),e("span",null,"Feeding Configuration")],-1)),e("div",W,[e("div",null,[o[15]||(o[15]=e("label",{for:"feedingType",class:"block text-sm font-bold text-gray-700 mb-2"},"Feeding Type",-1)),e("div",ee,[v(e("select",{id:"feedingType","onUpdate:modelValue":o[1]||(o[1]=s=>u.value=s),class:"w-full px-4 py-3 bg-white border-2 border-gray-200 text-gray-800 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 appearance-none"},o[13]||(o[13]=[e("option",{value:""},"Select feeding type...",-1),e("option",{value:"feed"},"Commercial Feed",-1),e("option",{value:"natural"},"Natural Feeding",-1)]),512),[[_,u.value]]),o[14]||(o[14]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[e("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("div",null,[o[17]||(o[17]=e("label",{for:"frequencyOfFeeding",class:"block text-sm font-bold text-gray-700 mb-2"},"Feeding Frequency (times per day)",-1)),e("div",oe,[v(e("input",{type:"number",id:"frequencyOfFeeding","onUpdate:modelValue":o[2]||(o[2]=s=>g.value=s),min:"1",max:"10",placeholder:"e.g., 3",class:"w-full px-4 py-3 bg-white border-2 border-gray-200 text-gray-800 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 pl-12"},null,512),[[N,g.value]]),o[16]||(o[16]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])])]),o[19]||(o[19]=e("div",{class:"pt-6 border-t border-gray-200"},[e("button",{type:"submit",class:"w-full bg-gradient-to-r from-emerald-600 to-emerald-700 text-white px-6 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]"},[e("span",{class:"flex items-center justify-center space-x-2"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"Save Farm Information")])])],-1))],32)])]),o[21]||(o[21]=e("div",{class:"mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200"},[e("div",{class:"flex items-start space-x-3"},[e("div",{class:"bg-blue-100 p-2 rounded-xl"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",null,[e("h4",{class:"font-bold text-blue-800 mb-2"},"Farm Setup Tips"),e("ul",{class:"text-blue-700 space-y-1 text-sm"},[e("li",null,"• Accurate location helps with weather monitoring and planning"),e("li",null,"• Commercial feed provides consistent nutrition"),e("li",null,"• Natural feeding can reduce costs but requires careful monitoring"),e("li",null,"• Adjust feeding frequency based on pig age and size")])])])],-1))])])]),_:1})]))}};export{le as default};
