import{r as i,z as D,h as S,c as d,a as I,w as k,o as s,b as r,f as E,l as g,v as m,F as f,p as y,t as n,s as w,g as F}from"./app-DIld19k6.js";import{_ as A}from"./AuthenticatedLayout-BYUgyG7J.js";const C={class:"flex justify-center"},P={class:"w-[75%]"},T={key:0,class:"modal"},j={class:"modal-content"},R={class:"mb-4"},N=["value"],O={class:"mb-4"},$=["value"],V={class:"mb-4"},q={class:"mb-4"},z={class:"overflow-x-auto"},M={class:"min-w-full bg-white dark:bg-gray-800"},U={class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},K={class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},L={class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},X={class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},J={class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},G=["onClick"],Z={__name:"BreedingRecord",setup(H){const l=i([]),c=i(!1),a=D({sow_id:"",boar_id:"",date_of_breeding:"",expected_farrowing_date:""}),b=i([]),u=i([]),_=async()=>{try{const t=await fetch("/api/breeding-records",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const e=await t.json();l.value=e}catch(t){console.error("Error fetching breeding records:",t)}},x=async()=>{try{const t=await fetch("/api/pigs",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const e=await t.json();b.value=e.filter(o=>o.gender==="male"),console.log(b),u.value=e.filter(o=>o.gender==="female"),console.log(u)}catch(t){console.error("Error fetching pigs:",t)}},h=()=>{const t=new Date(a.date_of_breeding),e=114,o=new Date(t);o.setDate(t.getDate()+e),a.expected_farrowing_date=o.toISOString().split("T")[0]},v=async()=>{try{const t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e=await fetch("/api/breeding-records",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(a)});if(!e.ok)throw new Error("Network response was not ok");const o=await e.json();l.value.push(o),p()}catch(t){console.error("Error adding breeding record:",t)}},B=async t=>{try{const e=document.querySelector('meta[name="csrf-token"]').getAttribute("content");await fetch(`/api/breeding-records/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"}),l.value=l.value.filter(o=>o.id!==t)}catch(e){console.error("Error deleting breeding record:",e)}},p=()=>{a.sow_id="",a.boar_id="",a.date_of_breeding="",a.expected_farrowing_date="",c.value=!1};return S(()=>{x(),_()}),(t,e)=>(s(),d("div",null,[I(A,null,{header:k(()=>e[5]||(e[5]=[r("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Breeding Records",-1)])),default:k(()=>[r("main",null,[r("div",C,[r("div",P,[r("button",{onClick:e[0]||(e[0]=o=>c.value=!0),class:"mb-4 bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:focus:ring-blue-800"},"Add Breeding Record"),c.value?(s(),d("div",T,[r("div",j,[r("span",{class:"close",onClick:p},"Ã—"),e[11]||(e[11]=r("h3",null,"Add Breeding Record",-1)),r("form",{onSubmit:E(v,["prevent"])},[r("div",R,[e[6]||(e[6]=r("label",{for:"sowId",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Sow (Female Pig)",-1)),g(r("select",{id:"sowId","onUpdate:modelValue":e[1]||(e[1]=o=>a.sow_id=o),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[(s(!0),d(f,null,y(u.value,o=>(s(),d("option",{key:o.PigId,value:o.PigId},n(o.PigId),9,N))),128))],512),[[m,a.sow_id]])]),r("div",O,[e[7]||(e[7]=r("label",{for:"boarId",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Boar (Male Pig)",-1)),g(r("select",{id:"boarId","onUpdate:modelValue":e[2]||(e[2]=o=>a.boar_id=o),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[(s(!0),d(f,null,y(b.value,o=>(s(),d("option",{key:o.PigId,value:o.PigId},n(o.PigId),9,$))),128))],512),[[m,a.boar_id]])]),r("div",V,[e[8]||(e[8]=r("label",{for:"dateOfBreeding",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Date of Breeding",-1)),g(r("input",{type:"date",id:"dateOfBreeding","onUpdate:modelValue":e[3]||(e[3]=o=>a.date_of_breeding=o),onChange:h,class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,544),[[w,a.date_of_breeding]])]),r("div",q,[e[9]||(e[9]=r("label",{for:"expectedFarrowingDate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Expected Farrowing Date",-1)),g(r("input",{type:"date",id:"expectedFarrowingDate","onUpdate:modelValue":e[4]||(e[4]=o=>a.expected_farrowing_date=o),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",readonly:""},null,512),[[w,a.expected_farrowing_date]])]),e[10]||(e[10]=r("button",{type:"submit",class:"w-full bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:focus:ring-blue-800"},"Submit",-1))],32)])])):F("",!0),r("div",z,[r("table",M,[e[12]||(e[12]=r("thead",null,[r("tr",null,[r("th",{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},"Sow ID"),r("th",{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},"Boar ID"),r("th",{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},"Date of Breeding"),r("th",{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},"Expected Farrowing Date"),r("th",{class:"py-2 px-4 border-b border-gray-200 dark:border-gray-700"},"Actions")])],-1)),r("tbody",null,[(s(!0),d(f,null,y(l.value,o=>(s(),d("tr",{key:o.id},[r("td",U,n(o.sow_id),1),r("td",K,n(o.boar_id),1),r("td",L,n(o.date_of_breeding),1),r("td",X,n(o.expected_farrowing_date),1),r("td",J,[r("button",{onClick:Q=>B(o.id),class:"bg-red-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-red-300 dark:bg-red-600 dark:focus:ring-red-800"},"Delete",8,G)])]))),128))])])])])])])]),_:1})]))}};export{Z as default};
