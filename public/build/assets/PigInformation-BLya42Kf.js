import{r as u,z as S,h as M,c as l,a as O,w as N,o as d,b as t,F as T,m as A,t as n,f as I,k as g,q as m,v as E,g as v}from"./app-Dh5TspTw.js";import{_ as z}from"./AuthenticatedLayout-CTQH58Fr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"flex justify-center"},K={class:"w-[75%]"},X={class:"min-w-full bg-white dark:bg-gray-800 hidden-mobile"},G={class:"py-2 text-left text-gray-700 dark:text-gray-300"},J={class:"py-2 text-left text-gray-700 dark:text-gray-300"},L={class:"py-2 text-left text-gray-700 dark:text-gray-300"},H={class:"py-2 text-left text-gray-700 dark:text-gray-300"},Q={class:"py-2 text-left text-gray-700 dark:text-gray-300"},Y={class:"py-2 text-left text-gray-700 dark:text-gray-300"},Z=["src"],ee={class:"py-2 text-left text-gray-700 dark:text-gray-300"},te=["onClick"],re=["onClick"],ae={class:"block-mobile"},oe={class:"flex items-center mb-4"},se=["src"],ne={class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},le={class:"mb-2"},de={class:"text-gray-700 dark:text-gray-300"},ie={class:"mb-2"},ce={class:"text-gray-700 dark:text-gray-300"},ue={class:"mb-2"},ge={class:"text-gray-700 dark:text-gray-300"},be={class:"mb-2"},fe={class:"text-gray-700 dark:text-gray-300"},ye=["onClick"],me=["onClick"],ke={key:0,class:"modal"},pe={class:"modal-content"},xe={class:"mb-4"},he={class:"mb-4"},ve={class:"mb-4"},we={class:"mb-4"},_e={key:1,class:"modal"},Se={class:"modal-content"},Te={class:"mb-4"},Ae={class:"mb-4"},Ie={key:2,class:"modal"},Ce={class:"modal-content"},Ve={key:0,class:"modal"},Ne={class:"modal-content"},Ee={class:"mb-4"},$e={class:"mb-4"},De={class:"mb-4"},Re={key:1},je=["onClick"],qe={key:2},Me={__name:"PigInformation",setup(Fe){const b=u([]),p=u(!1),x=u(!1),w=u(!1),k=u(!1),f=u(null),y=u([]),_=u(""),o=S({weight:"",date_of_birth:"",gender:"",status:"healthy",image:null}),c=S({weight:"",status:"healthy"}),s=S({vaccineName:"",vaccineType:"",dateAdministered:""}),$=async()=>{try{const a=await fetch("/api/pigfarminformation",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!a.ok)throw new Error("Network response was not ok");const e=await a.json();o.pigfarmID=e.pigfarmID}catch(a){console.error("Error fetching pig farm ID:",a)}},D=a=>{o.image=a.target.files[0]},R=async()=>{try{const a=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e=new FormData;e.append("weight",o.weight),e.append("date_of_birth",o.date_of_birth),e.append("gender",o.gender),e.append("status",o.status),e.append("image",o.image),console.log("Submitting form with data:",{weight:o.weight,date_of_birth:o.date_of_birth,gender:o.gender,status:o.status,image:o.image});const r=await fetch("/api/pigs",{method:"POST",headers:{"X-CSRF-TOKEN":a,Authorization:`Bearer ${localStorage.getItem("token")}`},body:e});if(!r.ok)throw new Error("Network response was not ok");const i=r.headers.get("content-type");if(!i||!i.includes("application/json"))throw new Error("Response is not JSON");const h=await r.json();console.log("Response data:",h),b.value.push(h),p.value=!1,o.weight="",o.date_of_birth="",o.gender="",o.status="healthy",o.image=null}catch(a){console.error("Error submitting form:",a)}},j=async()=>{try{const a=await fetch("/api/pigs",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!a.ok)throw new Error("Network response was not ok");const e=await a.json();b.value=e}catch(a){console.error("Error fetching pigs:",a)}},C=async a=>{f.value=a,w.value=!0;try{const e=await fetch(`/api/pigs/${a}/vaccination-records`,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(e.ok){const r=await e.json();y.value=r,_.value=""}else if(e.status===404)y.value=[],_.value="No vaccination records found";else throw new Error("Network response was not ok")}catch(e){console.error("Error fetching vaccination records:",e)}},q=async()=>{try{const a=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e=await fetch(`/api/pigs/${f.value}/vaccination-records`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)});if(!e.ok)throw console.error("Response status:",e.status),console.error("Response status text:",e.statusText),new Error("Network response was not ok");const r=await e.json();y.value.push(r),k.value=!1,s.vaccineName="",s.vaccineType="",s.dateAdministered=""}catch(a){console.error("Error adding vaccination record:",a)}},F=async a=>{try{const e=document.querySelector('meta[name="csrf-token"]').getAttribute("content");await fetch(`/api/pigs/${f.value}/vaccination-records/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"}),y.value=y.value.filter(r=>r.id!==a)}catch(e){console.error("Error deleting vaccination record:",e)}},B=async()=>{try{const a=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e=await fetch(`/api/pigs/${f.value}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({weight:c.weight,status:c.status})});if(!e.ok)throw new Error("Network response was not ok");const r=await e.json();console.log("Updated pig details:",r);const i=b.value.findIndex(h=>h.pigId===f.value);i!==-1&&(b.value[i].weight=r.pig.weight,b.value[i].status=r.pig.status),x.value=!1}catch(a){console.error("Error updating pig details:",a)}},V=(a,e,r)=>{f.value=a,c.weight=e,c.status=r,x.value=!0},P=()=>{w.value=!1,k.value=!1,s.vaccineName="",s.vaccineType="",s.dateAdministered=""},U=()=>{k.value=!1,s.vaccineName="",s.vaccineType="",s.dateAdministered=""};return M(()=>{$(),j()}),(a,e)=>(d(),l("div",null,[O(z,null,{header:N(()=>e[12]||(e[12]=[t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Pig Information",-1)])),default:N(()=>[t("main",null,[t("div",W,[t("div",K,[t("button",{onClick:e[0]||(e[0]=r=>p.value=!0),class:"mb-4 bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:focus:ring-blue-800"},"Add Pig"),t("table",X,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",{class:"py-2 text-left text-gray-700 dark:text-gray-300"},"ID"),t("th",{class:"py-2 text-left text-gray-700 dark:text-gray-300"},"Weight"),t("th",{class:"py-2 text-left text-gray-700 dark:text-gray-300"},"Date of Birth"),t("th",{class:"py-2 text-left text-gray-700 dark:text-gray-300"},"Gender"),t("th",{class:"py-2 text-left text-gray-700 dark:text-gray-300"},"Status"),t("th",{class:"py-2 text-left text-gray-700 dark:text-gray-300"},"Image"),t("th",{class:"py-2 text-left text-gray-700 dark:text-gray-300"},"Actions")])],-1)),t("tbody",null,[(d(!0),l(T,null,A(b.value,r=>(d(),l("tr",{key:r.pigId},[t("td",G,n(r.pigId),1),t("td",J,n(r.weight),1),t("td",L,n(r.date_of_birth),1),t("td",H,n(r.gender),1),t("td",Q,n(r.status),1),t("td",Y,[t("img",{src:`/storage/${r.image}`,alt:"Pig Image",class:"w-16 h-16 rounded-full"},null,8,Z)]),t("td",ee,[t("button",{onClick:i=>C(r.pigId),class:"bg-green-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-green-300 dark:bg-green-600 dark:focus:ring-green-800"},"View Vaccination Records",8,te),t("button",{onClick:i=>V(r.pigId,r.weight,r.status),class:"bg-yellow-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-yellow-300 dark:bg-yellow-600 dark:focus:ring-yellow-800 ml-2"},"Edit",8,re)])]))),128))])]),t("div",ae,[(d(!0),l(T,null,A(b.value,r=>(d(),l("div",{key:r.pigId,class:"mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md"},[t("div",oe,[t("img",{src:`/storage/${r.image}`,alt:"Pig Image",class:"w-16 h-16 rounded-full mr-4"},null,8,se),t("div",null,[t("h3",ne,n(r.pigId),1)])]),t("div",le,[e[14]||(e[14]=t("span",{class:"font-semibold text-gray-700 dark:text-gray-300"},"Weight:",-1)),t("span",de,n(r.weight),1)]),t("div",ie,[e[15]||(e[15]=t("span",{class:"font-semibold text-gray-700 dark:text-gray-300"},"Date of Birth:",-1)),t("span",ce,n(r.date_of_birth),1)]),t("div",ue,[e[16]||(e[16]=t("span",{class:"font-semibold text-gray-700 dark:text-gray-300"},"Gender:",-1)),t("span",ge,n(r.gender),1)]),t("div",be,[e[17]||(e[17]=t("span",{class:"font-semibold text-gray-700 dark:text-gray-300"},"Status:",-1)),t("span",fe,n(r.status),1)]),t("button",{onClick:i=>C(r.pigId),class:"w-full bg-green-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-green-300 dark:bg-green-600 dark:focus:ring-green-800"},"View Vaccination Records",8,ye),t("button",{onClick:i=>V(r.pigId,r.weight,r.status),class:"w-full bg-yellow-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-yellow-300 dark:bg-yellow-600 dark:focus:ring-yellow-800 mt-2"},"Edit",8,me)]))),128))]),p.value?(d(),l("div",ke,[t("div",pe,[t("span",{class:"close",onClick:e[1]||(e[1]=r=>p.value=!1)},"×"),t("form",{onSubmit:I(R,["prevent"])},[t("div",xe,[e[18]||(e[18]=t("label",{for:"weight",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Weight(kg)",-1)),g(t("input",{type:"number",step:"0.01",id:"weight","onUpdate:modelValue":e[2]||(e[2]=r=>o.weight=r),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[m,o.weight]])]),t("div",he,[e[19]||(e[19]=t("label",{for:"date_of_birth",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Date of Birth",-1)),g(t("input",{type:"date",id:"date_of_birth","onUpdate:modelValue":e[3]||(e[3]=r=>o.date_of_birth=r),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[m,o.date_of_birth]])]),t("div",ve,[e[21]||(e[21]=t("label",{for:"gender",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Gender",-1)),g(t("select",{id:"gender","onUpdate:modelValue":e[4]||(e[4]=r=>o.gender=r),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},e[20]||(e[20]=[t("option",{value:"male"},"Male",-1),t("option",{value:"female"},"Female",-1)]),512),[[E,o.gender]])]),t("div",we,[e[22]||(e[22]=t("label",{for:"image",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Image",-1)),t("input",{type:"file",id:"image",onChange:D,class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,32)]),e[23]||(e[23]=t("button",{type:"submit",class:"w-full bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:focus:ring-blue-800"},"Submit",-1))],32)])])):v("",!0),x.value?(d(),l("div",_e,[t("div",Se,[t("span",{class:"close",onClick:e[5]||(e[5]=r=>x.value=!1)},"×"),t("form",{onSubmit:I(B,["prevent"])},[t("div",Te,[e[24]||(e[24]=t("label",{for:"editWeight",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Weight(kg)",-1)),g(t("input",{type:"number",step:"0.01",id:"editWeight","onUpdate:modelValue":e[6]||(e[6]=r=>c.weight=r),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[m,c.weight]])]),t("div",Ae,[e[26]||(e[26]=t("label",{for:"editStatus",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),g(t("select",{id:"editStatus","onUpdate:modelValue":e[7]||(e[7]=r=>c.status=r),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},e[25]||(e[25]=[t("option",{value:"healthy"},"Healthy",-1),t("option",{value:"sick"},"Sick",-1),t("option",{value:"sold"},"Sold",-1),t("option",{value:"dead"},"Dead",-1)]),512),[[E,c.status]])]),e[27]||(e[27]=t("button",{type:"submit",class:"w-full bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:focus:ring-blue-800"},"Update",-1))],32)])])):v("",!0),w.value?(d(),l("div",Ie,[t("div",Ce,[t("span",{class:"close",onClick:P},"×"),t("h3",null,"Vaccination Records for Pig ID: "+n(f.value),1),t("button",{onClick:e[8]||(e[8]=r=>k.value=!0),class:"mb-4 bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:focus:ring-blue-800"},"Add Vaccination Record"),k.value?(d(),l("div",Ve,[t("div",Ne,[t("span",{class:"close",onClick:U},"×"),e[32]||(e[32]=t("h3",null,"Add Vaccination Record",-1)),t("form",{onSubmit:I(q,["prevent"])},[t("div",Ee,[e[28]||(e[28]=t("label",{for:"vaccineName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Vaccine Name",-1)),g(t("input",{type:"text",id:"vaccineName","onUpdate:modelValue":e[9]||(e[9]=r=>s.vaccineName=r),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[m,s.vaccineName]])]),t("div",$e,[e[29]||(e[29]=t("label",{for:"vaccineType",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Vaccine Type",-1)),g(t("input",{type:"text",id:"vaccineType","onUpdate:modelValue":e[10]||(e[10]=r=>s.vaccineType=r),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[m,s.vaccineType]])]),t("div",De,[e[30]||(e[30]=t("label",{for:"dateAdministered",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Date Administered",-1)),g(t("input",{type:"date",id:"dateAdministered","onUpdate:modelValue":e[11]||(e[11]=r=>s.dateAdministered=r),class:"mt-1 block w-full p-2.5 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[m,s.dateAdministered]])]),e[31]||(e[31]=t("button",{type:"submit",class:"w-full bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:focus:ring-blue-800"},"Submit",-1))],32)])])):v("",!0),y.value.length>0?(d(),l("ul",Re,[(d(!0),l(T,null,A(y.value,r=>(d(),l("li",{key:r.id},[t("span",null,n(r.vaccineName)+" - "+n(r.vaccineType)+" - "+n(r.dateAdministered),1),t("button",{onClick:i=>F(r.id),class:"bg-red-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-red-300 dark:bg-red-600 dark:focus:ring-red-800"},"Delete",8,je)]))),128))])):(d(),l("p",qe,n(_.value),1))])])):v("",!0)])])])]),_:1})]))}};export{Me as default};
