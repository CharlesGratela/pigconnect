import{r as u,z as S,h as M,c as i,a as O,w as N,o as r,b as e,F as T,p as A,t as l,f as I,l as b,s as p,v as E,g as y}from"./app-DIld19k6.js";import{_ as z}from"./AuthenticatedLayout-BYUgyG7J.js";const W={class:"flex justify-center"},K={class:"w-[75%]"},X={class:"min-w-full bg-white hidden-mobile"},G={class:"py-2 text-left text-black"},J={class:"py-2 text-left text-black"},L={class:"py-2 text-left text-black"},H={class:"py-2 text-left text-black"},Q={class:"py-2 text-left text-black"},Y={class:"py-2 text-left text-black"},Z=["src"],tt={class:"py-2 text-left text-black"},et=["onClick"],ot=["onClick"],st={class:"block-mobile"},at={class:"flex items-center mb-4"},nt=["src"],lt={class:"text-lg font-semibold text-black"},it={class:"mb-2"},rt={class:"text-black"},dt={class:"mb-2"},ct={class:"text-black"},ut={class:"mb-2"},bt={class:"text-black"},gt={class:"mb-2"},mt={class:"text-black"},ft=["onClick"],pt=["onClick"],kt={key:0,class:"modal"},ht={class:"modal-content"},vt={class:"mb-4"},wt={class:"mb-4"},yt={class:"mb-4"},xt={class:"mb-4"},_t={key:1,class:"modal"},St={class:"modal-content"},Tt={class:"mb-4"},At={class:"mb-4"},It={key:2,class:"modal"},Ct={class:"modal-content"},Vt={key:0,class:"modal"},Nt={class:"modal-content"},Et={class:"mb-4"},$t={class:"mb-4"},Dt={class:"mb-4"},Rt={key:1},jt=["onClick"],Ft={key:2},Ut={__name:"PigInformation",setup(qt){const g=u([]),h=u(!1),v=u(!1),x=u(!1),k=u(!1),m=u(null),f=u([]),_=u(""),a=S({weight:"",date_of_birth:"",gender:"",status:"healthy",image:null}),c=S({weight:"",status:"healthy"}),n=S({vaccineName:"",vaccineType:"",dateAdministered:""}),$=async()=>{try{const s=await fetch("/api/pigfarminformation",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!s.ok)throw new Error("Network response was not ok");const t=await s.json();a.pigfarmID=t.pigfarmID}catch(s){console.error("Error fetching pig farm ID:",s)}},D=s=>{a.image=s.target.files[0]},R=async()=>{try{const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),t=new FormData;t.append("weight",a.weight),t.append("date_of_birth",a.date_of_birth),t.append("gender",a.gender),t.append("status",a.status),t.append("image",a.image),console.log("Submitting form with data:",{weight:a.weight,date_of_birth:a.date_of_birth,gender:a.gender,status:a.status,image:a.image});const o=await fetch("/api/pigs",{method:"POST",headers:{"X-CSRF-TOKEN":s,Authorization:`Bearer ${localStorage.getItem("token")}`},body:t});if(!o.ok)throw new Error("Network response was not ok");const d=o.headers.get("content-type");if(!d||!d.includes("application/json"))throw new Error("Response is not JSON");const w=await o.json();console.log("Response data:",w),g.value.push(w),h.value=!1,a.weight="",a.date_of_birth="",a.gender="",a.status="healthy",a.image=null}catch(s){console.error("Error submitting form:",s)}},j=async()=>{try{const s=await fetch("/api/pigs",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!s.ok)throw new Error("Network response was not ok");const t=await s.json();g.value=t}catch(s){console.error("Error fetching pigs:",s)}},C=async s=>{m.value=s,x.value=!0;try{const t=await fetch(`/api/pigs/${s}/vaccination-records`,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(t.ok){const o=await t.json();f.value=o,_.value=""}else if(t.status===404)f.value=[],_.value="No vaccination records found";else throw new Error("Network response was not ok")}catch(t){console.error("Error fetching vaccination records:",t)}},F=async()=>{try{const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),t=await fetch(`/api/pigs/${m.value}/vaccination-records`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(n)});if(!t.ok)throw console.error("Response status:",t.status),console.error("Response status text:",t.statusText),new Error("Network response was not ok");const o=await t.json();f.value.push(o),k.value=!1,n.vaccineName="",n.vaccineType="",n.dateAdministered=""}catch(s){console.error("Error adding vaccination record:",s)}},q=async s=>{try{const t=document.querySelector('meta[name="csrf-token"]').getAttribute("content");await fetch(`/api/pigs/${m.value}/vaccination-records/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"}),f.value=f.value.filter(o=>o.id!==s)}catch(t){console.error("Error deleting vaccination record:",t)}},B=async()=>{try{const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),t=await fetch(`/api/pigs/${m.value}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({weight:c.weight,status:c.status})});if(!t.ok)throw new Error("Network response was not ok");const o=await t.json();console.log("Updated pig details:",o);const d=g.value.findIndex(w=>w.pigId===m.value);d!==-1&&(g.value[d].weight=o.pig.weight,g.value[d].status=o.pig.status),v.value=!1}catch(s){console.error("Error updating pig details:",s)}},V=(s,t,o)=>{m.value=s,c.weight=t,c.status=o,v.value=!0},P=()=>{x.value=!1,k.value=!1,n.vaccineName="",n.vaccineType="",n.dateAdministered=""},U=()=>{k.value=!1,n.vaccineName="",n.vaccineType="",n.dateAdministered=""};return M(()=>{$(),j()}),(s,t)=>(r(),i("div",null,[O(z,null,{header:N(()=>t[12]||(t[12]=[e("h2",{class:"font-semibold text-xl text-black leading-tight"},"Pig Information",-1)])),default:N(()=>[e("main",null,[e("div",W,[e("div",K,[e("button",{onClick:t[0]||(t[0]=o=>h.value=!0),class:"mb-4 bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300"},"Add Pig"),e("table",X,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",{class:"py-2 text-left text-black"},"ID"),e("th",{class:"py-2 text-left text-black"},"Weight"),e("th",{class:"py-2 text-left text-black"},"Date of Birth"),e("th",{class:"py-2 text-left text-black"},"Gender"),e("th",{class:"py-2 text-left text-black"},"Status"),e("th",{class:"py-2 text-left text-black"},"Image"),e("th",{class:"py-2 text-left text-black"},"Actions")])],-1)),e("tbody",null,[(r(!0),i(T,null,A(g.value,o=>(r(),i("tr",{key:o.pigId},[e("td",G,l(o.pigId),1),e("td",J,l(o.weight),1),e("td",L,l(o.date_of_birth),1),e("td",H,l(o.gender),1),e("td",Q,l(o.status),1),e("td",Y,[e("img",{src:`/storage/${o.image}`,alt:"Pig Image",class:"w-16 h-16 rounded-full"},null,8,Z)]),e("td",tt,[e("button",{onClick:d=>C(o.pigId),class:"bg-green-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-green-300"},"View Vaccination Records",8,et),e("button",{onClick:d=>V(o.pigId,o.weight,o.status),class:"bg-yellow-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-yellow-300 ml-2"},"Edit",8,ot)])]))),128))])]),e("div",st,[(r(!0),i(T,null,A(g.value,o=>(r(),i("div",{key:o.pigId,class:"mb-4 p-4 bg-white rounded-lg shadow-md"},[e("div",at,[e("img",{src:`/storage/${o.image}`,alt:"Pig Image",class:"w-16 h-16 rounded-full mr-4"},null,8,nt),e("div",null,[e("h3",lt,l(o.pigId),1)])]),e("div",it,[t[14]||(t[14]=e("span",{class:"font-semibold text-black"},"Weight:",-1)),e("span",rt,l(o.weight),1)]),e("div",dt,[t[15]||(t[15]=e("span",{class:"font-semibold text-black"},"Date of Birth:",-1)),e("span",ct,l(o.date_of_birth),1)]),e("div",ut,[t[16]||(t[16]=e("span",{class:"font-semibold text-black"},"Gender:",-1)),e("span",bt,l(o.gender),1)]),e("div",gt,[t[17]||(t[17]=e("span",{class:"font-semibold text-black"},"Status:",-1)),e("span",mt,l(o.status),1)]),e("button",{onClick:d=>C(o.pigId),class:"w-full bg-green-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-green-300"},"View Vaccination Records",8,ft),e("button",{onClick:d=>V(o.pigId,o.weight,o.status),class:"w-full bg-yellow-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-yellow-300 mt-2"},"Edit",8,pt)]))),128))]),h.value?(r(),i("div",kt,[e("div",ht,[e("span",{class:"close",onClick:t[1]||(t[1]=o=>h.value=!1)},"Ã—"),e("form",{onSubmit:I(R,["prevent"])},[e("div",vt,[t[18]||(t[18]=e("label",{for:"weight",class:"block text-sm font-medium text-black"},"Weight(kg)",-1)),b(e("input",{type:"number",step:"0.01",id:"weight","onUpdate:modelValue":t[2]||(t[2]=o=>a.weight=o),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-black rounded-lg focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[p,a.weight]])]),e("div",wt,[t[19]||(t[19]=e("label",{for:"date_of_birth",class:"block text-sm font-medium text-black"},"Date of Birth",-1)),b(e("input",{type:"date",id:"date_of_birth","onUpdate:modelValue":t[3]||(t[3]=o=>a.date_of_birth=o),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-black rounded-lg focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[p,a.date_of_birth]])]),e("div",yt,[t[21]||(t[21]=e("label",{for:"gender",class:"block text-sm font-medium text-black"},"Gender",-1)),b(e("select",{id:"gender","onUpdate:modelValue":t[4]||(t[4]=o=>a.gender=o),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-black rounded-lg focus:ring-blue-500 focus:border-blue-500",required:""},t[20]||(t[20]=[e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1)]),512),[[E,a.gender]])]),e("div",xt,[t[22]||(t[22]=e("label",{for:"image",class:"block text-sm font-medium text-black"},"Image",-1)),e("input",{type:"file",id:"image",onChange:D,class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-black rounded-lg focus:ring-blue-500 focus:border-blue-500",required:""},null,32)]),t[23]||(t[23]=e("button",{type:"submit",class:"w-full bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300"},"Submit",-1))],32)])])):y("",!0),v.value?(r(),i("div",_t,[e("div",St,[e("span",{class:"close",onClick:t[5]||(t[5]=o=>v.value=!1)},"Ã—"),e("form",{onSubmit:I(B,["prevent"])},[e("div",Tt,[t[24]||(t[24]=e("label",{for:"editWeight",class:"block text-sm font-medium text-black"},"Weight(kg)",-1)),b(e("input",{type:"number",step:"0.01",id:"editWeight","onUpdate:modelValue":t[6]||(t[6]=o=>c.weight=o),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-black rounded-lg focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[p,c.weight]])]),e("div",At,[t[26]||(t[26]=e("label",{for:"editStatus",class:"block text-sm font-medium text-black"},"Status",-1)),b(e("select",{id:"editStatus","onUpdate:modelValue":t[7]||(t[7]=o=>c.status=o),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-black rounded-lg focus:ring-blue-500 focus:border-blue-500",required:""},t[25]||(t[25]=[e("option",{value:"healthy"},"Healthy",-1),e("option",{value:"sick"},"Sick",-1),e("option",{value:"sold"},"Sold",-1),e("option",{value:"dead"},"Dead",-1)]),512),[[E,c.status]])]),t[27]||(t[27]=e("button",{type:"submit",class:"w-full bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300"},"Update",-1))],32)])])):y("",!0),x.value?(r(),i("div",It,[e("div",Ct,[e("span",{class:"close",onClick:P},"Ã—"),e("h3",null,"Vaccination Records for Pig ID: "+l(m.value),1),e("button",{onClick:t[8]||(t[8]=o=>k.value=!0),class:"mb-4 bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300"},"Add Vaccination Record"),k.value?(r(),i("div",Vt,[e("div",Nt,[e("span",{class:"close",onClick:U},"Ã—"),t[32]||(t[32]=e("h3",null,"Add Vaccination Record",-1)),e("form",{onSubmit:I(F,["prevent"])},[e("div",Et,[t[28]||(t[28]=e("label",{for:"vaccineName",class:"block text-sm font-medium text-black"},"Vaccine Name",-1)),b(e("input",{type:"text",id:"vaccineName","onUpdate:modelValue":t[9]||(t[9]=o=>n.vaccineName=o),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-black rounded-lg focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[p,n.vaccineName]])]),e("div",$t,[t[29]||(t[29]=e("label",{for:"vaccineType",class:"block text-sm font-medium text-black"},"Vaccine Type",-1)),b(e("input",{type:"text",id:"vaccineType","onUpdate:modelValue":t[10]||(t[10]=o=>n.vaccineType=o),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-black rounded-lg focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[p,n.vaccineType]])]),e("div",Dt,[t[30]||(t[30]=e("label",{for:"dateAdministered",class:"block text-sm font-medium text-black"},"Date Administered",-1)),b(e("input",{type:"date",id:"dateAdministered","onUpdate:modelValue":t[11]||(t[11]=o=>n.dateAdministered=o),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-black rounded-lg focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[p,n.dateAdministered]])]),t[31]||(t[31]=e("button",{type:"submit",class:"w-full bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300"},"Submit",-1))],32)])])):y("",!0),f.value.length>0?(r(),i("ul",Rt,[(r(!0),i(T,null,A(f.value,o=>(r(),i("li",{key:o.id},[e("span",null,l(o.vaccineName)+" - "+l(o.vaccineType)+" - "+l(o.dateAdministered),1),e("button",{onClick:d=>q(o.id),class:"bg-red-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-red-300"},"Delete",8,jt)]))),128))])):(r(),i("p",Ft,l(_.value),1))])])):y("",!0)])])])]),_:1})]))}};export{Ut as default};
