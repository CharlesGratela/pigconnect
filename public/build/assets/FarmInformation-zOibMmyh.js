import{r as u,z as h,h as F,B as E,c as T,a as j,w,o as A,b as r,f as S,l as c,s as p,v as U}from"./app-DIld19k6.js";import{_}from"./AuthenticatedLayout-BYUgyG7J.js";const B={class:"flex justify-center"},M={class:"w-[75%]"},N={class:"mb-4"},z={class:"mb-4"},C={class:"mb-4"},I={class:"mb-4"},$={class:"mb-4"},G={__name:"FarmInformation",setup(q){const m=u(""),f=u(""),y=u(""),b=u(""),o=h({lat:0,lng:0}),d=u("");let g,n;const k=async()=>{try{const t=await fetch("/api/pigfarminformation",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const e=await t.json();console.log(e),e&&(m.value=e.feeding_type,f.value=e.frequency_of_feeding,y.value=e.min_price_per_kilo,b.value=e.max_price_per_kilo,o.lat=e.latitude,o.lng=e.longitude,n&&(n.setPosition({lat:o.lat,lng:o.lng}),g.setCenter({lat:o.lat,lng:o.lng})),await x(o.lat,o.lng))}catch(t){console.error("Error fetching farm information:",t)}},x=async(t,e)=>{const i=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${e}&key=AIzaSyAPE3z_ByaGmKAwUDjUPFP6ZEZyyWmKvTY`;try{const l=await fetch(i);if(!l.ok)throw new Error("Network response was not ok");const s=await l.json();console.log("Reverse Geocoding Result:",s),s.results&&s.results.length>0&&(d.value=s.results[0].formatted_address)}catch(l){console.error("Error performing reverse geocoding:",l)}},v=async t=>{const a=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=AIzaSyAPE3z_ByaGmKAwUDjUPFP6ZEZyyWmKvTY`;try{const i=await fetch(a);if(!i.ok)throw new Error("Network response was not ok");const l=await i.json();if(console.log("Geocoding Result:",l),l.results&&l.results.length>0){const s=l.results[0].geometry.location;o.lat=s.lat,o.lng=s.lng,n&&(n.setPosition({lat:o.lat,lng:o.lng}),g.setCenter({lat:o.lat,lng:o.lng}))}}catch(i){console.error("Error performing geocoding:",i)}},P=()=>{g=new google.maps.Map(document.getElementById("map"),{center:{lat:o.lat,lng:o.lng},zoom:13}),n=new google.maps.Marker({position:{lat:o.lat,lng:o.lng},map:g,draggable:!0}),google.maps.event.addListener(n,"dragend",async function(){const t=n.getPosition();o.lat=t.lat(),o.lng=t.lng(),g.setCenter({lat:o.lat,lng:o.lng}),await x(o.lat,o.lng)})},K=async()=>{try{const t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e=await fetch("/api/pigfarminformation",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({feedingType:m.value,frequencyOfFeeding:f.value,minPricePerKilo:y.value,maxPricePerKilo:b.value,location:o,address:d.value})});if(!e.ok)throw new Error("Network response was not ok");const a=await e.json();console.log("Form submitted successfully:",a),await k()}catch(t){console.error("Error submitting form:",t)}};return F(()=>{k(),P()}),E(d,async t=>{t&&await v(t)}),(t,e)=>(A(),T("div",null,[j(_,null,{header:w(()=>e[5]||(e[5]=[r("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Farm Details",-1)])),default:w(()=>[r("main",null,[r("div",B,[r("div",M,[r("form",{onSubmit:S(K,["prevent"]),class:"place-content-center"},[e[12]||(e[12]=r("div",{class:"mb-4"},[r("label",{for:"location",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Location"),r("div",{id:"map",class:"w-full h-64"})],-1)),r("div",N,[e[6]||(e[6]=r("label",{for:"address",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Address",-1)),c(r("input",{type:"text",id:"address","onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[p,d.value]])]),r("div",z,[e[8]||(e[8]=r("label",{for:"feedingType",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Feeding Type",-1)),c(r("select",{id:"feedingType","onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"},e[7]||(e[7]=[r("option",{value:"feed"},"Feed",-1),r("option",{value:"natural"},"Natural",-1)]),512),[[U,m.value]])]),r("div",C,[e[9]||(e[9]=r("label",{for:"frequencyOfFeeding",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Frequency of Feeding",-1)),c(r("input",{type:"text",id:"frequencyOfFeeding","onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[p,f.value]])]),r("div",I,[e[10]||(e[10]=r("label",{for:"minPricePerKilo",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Minimum Price per Kilo",-1)),c(r("input",{type:"number",id:"minPricePerKilo","onUpdate:modelValue":e[3]||(e[3]=a=>y.value=a),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[p,y.value]])]),r("div",$,[e[11]||(e[11]=r("label",{for:"maxPricePerKilo",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Maximum Price per Kilo",-1)),c(r("input",{type:"number",id:"maxPricePerKilo","onUpdate:modelValue":e[4]||(e[4]=a=>b.value=a),class:"mt-1 block w-full p-2.5 bg-gray-100 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[p,b.value]])]),e[13]||(e[13]=r("button",{type:"submit",class:"w-full bg-blue-500 text-white p-2.5 rounded-lg focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:focus:ring-blue-800"},"Submit",-1))],32)])])])]),_:1})]))}};export{G as default};
