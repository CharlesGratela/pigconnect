import{Q as b,r,e as y,z as w,c as x,w as g,A as p,o as c,a as s,t as l,b as m,d as k,n as I,F as C,l as B,s as M,B as D}from"./app-BBvVVKdH.js";import{_ as E}from"./AuthenticatedLayout-DUguJAC5.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"font-semibold text-xl text-dark leading-tight"},U={class:"chat-container bg-highlight"},z={class:"chat-messages bg-white"},F={class:"timestamp"},K={class:"chat-input bg-highlight"},L={__name:"Chat",setup(T){const{props:n}=b(),i=r(n.auth.user.id),a=r(""),o=r(n.messages),d=r(n.userId),_=r(n.senderName),v=async()=>{try{const e=await p.get(`/api/chat/messages/${d.value}`);o.value=e.data}catch(e){console.error("Error fetching messages:",e)}},u=async()=>{if(a.value.trim()!=="")try{const e=await p.post("/api/chat/",{receiver_id:d.value,message:a.value});o.value.push(e.data),a.value=""}catch(e){console.error("Error sending message:",e)}},f=e=>new Date(e).toLocaleString();return y(()=>{const e=setInterval(v,3e3);w(()=>clearInterval(e))}),(e,h)=>(c(),x(E,null,{header:g(()=>[s("h2",S,"Chat with "+l(_.value),1)]),default:g(()=>[s("div",U,[s("div",z,[(c(!0),m(C,null,k(o.value,t=>(c(),m("div",{key:t.id,class:"chat-message"},[s("div",{class:I({"chat-message-sent bg-primary text-secondary":t.sender_id===i.value,"chat-message-received bg-accent text-dark":t.sender_id!==i.value})},[s("p",null,l(t.message),1),s("p",F,l(f(t.created_at)),1)],2)]))),128))]),s("div",K,[B(s("input",{"onUpdate:modelValue":h[0]||(h[0]=t=>a.value=t),onKeyup:D(u,["enter"]),placeholder:"Type a message...",class:"bg-white border border-gray-300 rounded-lg p-2"},null,544),[[M,a.value]]),s("button",{onClick:u,class:"bg-secondary text-white p-2.5 rounded-lg"},"Send")])])]),_:1}))}},P=N(L,[["__scopeId","data-v-9872b7e3"]]);export{P as default};
