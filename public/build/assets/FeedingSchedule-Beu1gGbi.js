import{r as u,x as h,e as w,b as r,f as _,w as f,o as a,a as s,h as b,F as y,d as k,t as v,l as S,s as T,i as F}from"./app-BBvVVKdH.js";import{_ as x}from"./AuthenticatedLayout-DUguJAC5.js";const E={class:"flex justify-center"},N={class:"w-[75%]"},j=["for"],B=["id","onUpdate:modelValue"],C={key:0,class:"mt-4 p-4 bg-green-100 text-green-800 rounded-lg"},q={__name:"FeedingSchedule",setup(V){const c=u(0),n=h([]),i=u(!1),l=async()=>{try{const t=await fetch("/api/feedingschedule",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const e=await t.json();console.log(e),e&&(c.value=e.frequency_of_feeding,m(e.feeding_times))}catch(t){console.error("Error fetching feeding schedule:",t)}},m=(t=[])=>{n.length=0;for(let e=0;e<c.value;e++)n.push(t[e]||"")},g=async()=>{try{const t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),e=await fetch("/api/feedingschedule",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({feeding_times:n})});if(!e.ok){const o=await e.text();throw console.error("Error response:",o),new Error("Network response was not ok")}const d=await e.json();console.log("Form submitted successfully:",d),i.value=!0,setTimeout(()=>{i.value=!1},3e3),l()}catch(t){console.error("Error submitting form:",t)}};return w(()=>{l()}),(t,e)=>(a(),r("div",null,[_(x,null,{header:f(()=>e[0]||(e[0]=[s("h2",{class:"font-semibold text-xl text-[#543434] leading-tight"},"Feeding Schedule",-1)])),default:f(()=>[s("main",null,[s("div",E,[s("div",N,[s("form",{onSubmit:b(g,["prevent"]),class:"place-content-center"},[(a(!0),r(y,null,k(n,(d,o)=>(a(),r("div",{key:o,class:"mb-4"},[s("label",{for:"feedingTime"+o,class:"block text-sm font-medium text-[#543434]"},"Feeding Time "+v(o+1),9,j),S(s("input",{type:"time",id:"feedingTime"+o,"onUpdate:modelValue":p=>n[o]=p,class:"mt-1 block w-full p-2.5 bg-[#c58a61] border border-[#c59461] text-[#543434] rounded-lg focus:ring-[#c58a61] focus:border-[#c58a61]"},null,8,B),[[T,n[o]]])]))),128)),e[1]||(e[1]=s("button",{type:"submit",class:"w-full bg-[#281c11] text-white p-2.5 rounded-lg focus:ring-4 focus:ring-[#c58a61]"},"Submit",-1))],32),i.value?(a(),r("div",C," Feeding schedule saved successfully! ")):F("",!0)])])])]),_:1})]))}};export{q as default};
