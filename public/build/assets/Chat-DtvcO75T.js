import{Q as f,r as n,e as b,z as y,c as w,w as p,A as v,o as l,a as t,t as d,b as m,d as x,n as k,F as C,l as I,s as B,B as D}from"./app-DtuGJrLF.js";import{_ as M}from"./AuthenticatedLayout-DDyCWe83.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"font-semibold text-xl text-dark leading-tight"},S={class:"chat-container bg-highlight"},z={class:"chat-messages bg-white"},F={class:"timestamp"},K={class:"chat-input bg-highlight"},L={__name:"Chat",setup(N){const{props:c}=f(),u=n(c.auth.user.id),o=n(""),i=n(c.messages||[]),r=n(c.otherUser),h=async()=>{var s;if(!((s=r.value)!=null&&s.id)){console.error("No other user ID available");return}try{const e=await v.get(`/api/chat/messages/${r.value.id}`);i.value=e.data}catch(e){console.error("Error fetching messages:",e)}},g=async()=>{var s;if(!(o.value.trim()===""||!((s=r.value)!=null&&s.id)))try{const e=await v.post("/api/chat/",{receiver_id:r.value.id,message:o.value});i.value.push(e.data),o.value=""}catch(e){console.error("Error sending message:",e)}},_=s=>new Date(s).toLocaleString();return b(()=>{var s;if((s=r.value)!=null&&s.id){h();const e=setInterval(h,3e3);y(()=>clearInterval(e))}}),(s,e)=>(l(),w(M,null,{header:p(()=>{var a;return[t("h2",E,"Chat with "+d((a=r.value)==null?void 0:a.name),1)]}),default:p(()=>[t("div",S,[t("div",z,[(l(!0),m(C,null,x(i.value,a=>(l(),m("div",{key:a.id,class:"chat-message"},[t("div",{class:k({"chat-message-sent bg-primary text-secondary":a.sender_id===u.value,"chat-message-received bg-accent text-dark":a.sender_id!==u.value})},[t("p",null,d(a.message),1),t("p",F,d(_(a.created_at)),1)],2)]))),128))]),t("div",K,[I(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),onKeyup:D(g,["enter"]),placeholder:"Type a message...",class:"bg-white border border-gray-300 rounded-lg p-2"},null,544),[[B,o.value]]),t("button",{onClick:g,class:"bg-secondary text-white p-2.5 rounded-lg"},"Send")])])]),_:1}))}},A=U(L,[["__scopeId","data-v-02ce9219"]]);export{A as default};
